<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hitcraft Notification Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #333;
      text-align: center;
    }
    .test-section {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 4px;
    }
    select, input {
      padding: 8px;
      margin: 5px 0;
      display: block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      width: 100%;
    }
    label {
      margin-top: 10px;
      display: block;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Hitcraft Notification Test</h1>
    
    <div class="test-section">
      <h2>Test Artifact Notifications</h2>
      <p>Use this panel to simulate artifact generation events and test notifications.</p>
      
      <label for="artifact-type">Artifact Type:</label>
      <select id="artifact-type">
        <option value="audio_upload_complete">Audio Upload Complete</option>
        <option value="quantization_complete">Quantization Complete</option>
        <option value="mixing_complete">Mixing Complete</option>
        <option value="stem_separation_complete">Stem Separation Complete</option>
        <option value="song_rendering_complete">Song Rendering Complete</option>
        <option value="song_composition_complete">Song Composition Complete</option>
        <option value="lyrics_writing">Lyrics Writing</option>
      </select>
      
      <label for="custom-message">Custom Message (optional):</label>
      <input type="text" id="custom-message" placeholder="Leave empty for default message">
      
      <label for="artifact-id">Artifact ID (optional):</label>
      <input type="text" id="artifact-id" placeholder="e.g., audio123">
      
      <button id="send-notification">Send Test Notification</button>
    </div>
    
    <div class="test-section">
      <h2>Test Window Focus</h2>
      <p>Use these buttons to test notification behavior when app is focused/unfocused.</p>
      
      <button id="test-focus">Test With App Focused</button>
      <button id="test-unfocus">Test With App Unfocused</button>
    </div>
  </div>

  <script>
    // Get DOM elements
    const artifactTypeSelect = document.getElementById('artifact-type');
    const customMessageInput = document.getElementById('custom-message');
    const artifactIdInput = document.getElementById('artifact-id');
    const sendNotificationButton = document.getElementById('send-notification');
    const testFocusButton = document.getElementById('test-focus');
    const testUnfocusButton = document.getElementById('test-unfocus');
    
    // Default messages for each artifact type
    const defaultMessages = {
      'audio_upload_complete': 'Audio upload completed',
      'quantization_complete': 'Audio quantization completed',
      'mixing_complete': 'Audio mixing completed',
      'stem_separation_complete': 'Stem separation completed',
      'song_rendering_complete': 'Song rendering completed',
      'song_composition_complete': 'Song composition completed',
      'lyrics_writing': 'New lyrics are ready'
    };
    
    // Send notification function
    function sendTestNotification() {
      const artifactType = artifactTypeSelect.value;
      const customMessage = customMessageInput.value;
      const artifactId = artifactIdInput.value;
      
      const message = customMessage || defaultMessages[artifactType];
      
      const notificationData = {
        type: artifactType,
        message: message
      };
      
      if (artifactId) {
        notificationData.artifactId = artifactId;
      }
      
      // Send to main process
      require('electron').ipcRenderer.send('test-notification', notificationData);
      
      console.log('Sent test notification:', notificationData);
    }
    
    // Test with app focused
    function testWithAppFocused() {
      // Focus the main window first
      require('electron').remote.BrowserWindow.getAllWindows()[0].focus();
      
      // Then send notification after a short delay
      setTimeout(() => {
        sendTestNotification();
      }, 1000);
    }
    
    // Test with app unfocused
    function testWithAppUnfocused() {
      // Unfocus the app by focusing this test window
      require('electron').remote.getCurrentWindow().focus();
      
      // Then send notification after a short delay
      setTimeout(() => {
        sendTestNotification();
      }, 1000);
    }
    
    // Add event listeners
    sendNotificationButton.addEventListener('click', sendTestNotification);
    testFocusButton.addEventListener('click', testWithAppFocused);
    testUnfocusButton.addEventListener('click', testWithAppUnfocused);
  </script>
</body>
</html>
